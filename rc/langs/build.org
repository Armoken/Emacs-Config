* Configuration
** Make
   #+BEGIN_SRC emacs-lisp :noweb tangle :noweb yes
     (use-package make-mode
         :mode (("[Mm]akefile\\'" . makefile-gmake-mode))
         :hook ((makefile-mode          . ayrc/make-hook)
                (makefile-gmake-mode    . ayrc/make-hook)
                (makefile-imake-mode    . ayrc/make-hook)
                (makefile-bsdmake-mode  . ayrc/make-hook)
                (makefile-automake-mode . ayrc/make-hook)
                (makefile-mode          . ayrc/make-hook))
         :preface
         (progn
             <<make-hook>>))
   #+END_SRC

*** [[https://github.com/nverno/company-makefile][Company]]                                                                               :disabled:
    Package is not ready yet.

    #+NAME: make-company-completion
    #+BEGIN_SRC emacs-lisp :tangle no :noweb yes
      (use-package company-makefile
          :ensure t
          :commands (company-makefile-init company-makefile-capf))
    #+END_SRC

*** Hook
    #+NAME: make-hook
    #+BEGIN_SRC emacs-lisp :tangle no :noweb yes
      (defun ayrc/make-hook ()
          (setq indent-tabs-mode t)

          (display-line-numbers-mode 1)
          (visual-line-mode          1)
          (ws-butler-mode            1)
          (smart-shift-mode          1)
          (smartparens-mode          1)
          (abbrev-mode               1)
          (semantic-mode             1)
          (yas-minor-mode            1)

          (ayrc/setup-company '(company-capf :with company-yasnippet)))
    #+END_SRC

** [[https://gitlab.kitware.com/cmake/cmake/blob/master/Auxiliary/cmake-mode.el][CMake]]
   #+BEGIN_SRC emacs-lisp :noweb tangle :noweb yes
     (use-package cmake-mode
         :ensure t
         :mode (("/CMakeLists\\.txt\\'" . cmake-mode)
                ("\\.cmake\\'" . cmake-mode))
         :hook (cmake-mode . ayrc/cmake-hook)
         :init
         (progn
             <<cmake-font-lock-use-package>>)
         :preface
         (progn
             <<cmake-hook>>))
   #+END_SRC

*** [[https://github.com/Lindydancer/cmake-font-lock][CMake Font-lock]]
    Emacs Font-lock rules for CMake

    #+NAME: cmake-font-lock-use-package
    #+BEGIN_SRC emacs-lisp :tangle no :noweb yes
      (use-package cmake-font-lock
          :ensure t
          :commands (cmake-font-lock-activate))
    #+END_SRC

*** Hook
    #+NAME: cmake-hook
    #+BEGIN_SRC emacs-lisp :tangle no :noweb yes
      (defun ayrc/cmake-hook ()
          (display-line-numbers-mode 1)
          (visual-line-mode          1)
          (ws-butler-mode            1)
          (smart-shift-mode          1)
          (smartparens-mode          1)
          (semantic-mode             1)
          (abbrev-mode               1)
          (yas-minor-mode            1)

          (ayrc/setup-company '(company-cmake :with company-yasnippet))

          (hs-minor-mode             1)
          (flycheck-mode             1)
          (cmake-font-lock-activate)

          (setq cmake-tab-width 4))
    #+END_SRC
